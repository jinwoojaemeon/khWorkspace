package com.jdbc.lifegame.view;

import static com.jdbc.lifegame.common.UiTemplate.menuHeader;

import java.util.Scanner;

import com.jdbc.lifegame.controller.StockController;
import com.jdbc.lifegame.model.vo.LifeCharacter;

public class InvestMenu{
	private LifeCharacter life;
	private Scanner sc;
	StockController stc = new StockController();

    public InvestMenu(LifeCharacter life, Scanner sc) {
		super();
		this.life = life;
		this.sc = sc;
	}

	// 투자 메인 메뉴
    public void showMenu() {
    	String menuName = "투자";
		menuHeader(menuName, life);

        System.out.println("1. 주식");
        System.out.printf("        현재 가격: %,d만원\n", stc.getCurrentStockPrice(life.getCharNo()));
        System.out.println("        변동 -10% ~ +11%");
        System.out.println("=== 부동산 투자");
        System.out.println("2. 아파트 구매");
        System.out.println("        구매가: 5,000만원");
        System.out.println("        연수익: 300만원");
        System.out.println("3. 빌딩 구매");
        System.out.println("        구매가: 30,000만원");
        System.out.println("        연수익: 2,000만원");
        System.out.println("4. 호텔 구매");
        System.out.println("        구매가: 100,000만원");
        System.out.println("        연수익: 5,000만원");
        System.out.println("0. ← 돌아가기");
        System.out.print("메뉴 입력: ");
        int sel = sc.nextInt();
        switch(sel) {
	        case 1: 
	        	stockMenu(life, life.getStockCount());
	        	break;
	        case 2: 
	        	break;
	        case 3: 
	        	break;
	        case 4: 
	        	break;
	        case 0:
	        	return;
	        default:
	        	System.err.println("잘못된 입력입니다.");
        }
        
        
    }

    // 주식 메뉴
    public void stockMenu(LifeCharacter life, int myStockCount) {
    	String menuName = "주식";
		menuHeader(menuName, life);

        System.out.printf("현재 주식 가격: %,d만원\n", stc.getCurrentStockPrice(life.getCharNo()));
        System.out.printf("내가 가진 주식 수 : %d\n", myStockCount);
        System.out.println("1. 주식 구매 ");
        System.out.println("2. 주식 판매 ");
        System.out.println("0. ← 돌아가기");
        System.out.print("메뉴 입력: ");
        int sel = sc.nextInt();
        switch(sel) {
        case 1: 
        	System.out.println("구매 할 주식 수 : ");
        	int buyStockCnt = sc.nextInt();
        	if(life.getMoney() < buyStockCnt * stc.getCurrentStockPrice(life.getCharNo())) {
        		System.out.println("보유 금액이 부족합니다.");
        	}
        	break;
        case 2: 
        	System.out.println("구매 할 주식 수 : ");
        	int sellStockCnt = sc.nextInt();
        	if(life.getStockCount() < sellStockCnt * stc.getCurrentStockPrice(life.getCharNo())) {
        		System.out.println("보유 금액이 부족합니다.");
        	}
        	break;

        case 0:
        	return;
        default:
        	System.out.println("잘못된 입력입니다.");
        }
    }
}
